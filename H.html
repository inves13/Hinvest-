<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>H Invest</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
  <style>
    /* Estilos */
    .usuario-info {
      text-align: center;
      margin-top: 20px;
    }
    .usuario-info p {
      font-size: 18px;
      margin: 5px 0;
    }
    .carteira {
      padding: 20px 15px;
      background-color: #000000;
      margin: 20px;
      border-radius: 10px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }
    .carteira h2 {
      text-align: center;
      margin-bottom: 30px;
      font-weight: 700;
      font-size: 28px;
      color: #006400;
    }
    .saldos {
      display: flex;
      justify-content: space-around;
      flex-wrap: wrap;
      gap: 30px;
    }
    .saldo {
      flex: 1 1 150px;
      background: black;
      border-radius: 12px;
      padding: 20px 15px;
      box-shadow: 0 0 8px rgba(0,0,0,0.1);
      text-align: center;
      min-width: 150px;
      max-width: 180px;
    }
    .saldo img {
      max-width: 60px;
      margin-bottom: 15px;
    }
    .saldo p {
      font-size: 24px;
      font-weight: 700;
      margin: 10px 0 5px;
      color: #008000;
      user-select: none;
    }
    .saldo span {
      display: block;
      font-size: 16px;
      color: #444;
      font-weight: 600;
    }
    .botao {
      display: flex;
      align-items: center;
      gap: 10px;
      background-color: #008000;
      color: white;
      padding: 10px;
      margin: 10px auto;
      text-decoration: none;
      border-radius: 8px;
      justify-content: center;
      cursor: pointer;
      border: none;
      font-size: 16px;
      max-width: 220px;
      user-select: none;
    }
    .botao img {
      max-width: 24px;
    }
    .botao:disabled {
      background-color: #999;
      cursor: not-allowed;
    }
    .notificacao {
      background-color: yellow;
      padding: 10px;
      font-weight: bold;
      margin: 10px 20px;
      border-radius: 8px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }
    .menu-inferior {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: #000000;
      display: flex;
      justify-content: space-around;
      padding: 10px 0;
      box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
      user-select: none;
    }
    .menu-inferior a {
      text-align: center;
      color: #fff;
      text-decoration: none;
      font-weight: 600;
      font-size: 14px;
    }
    .menu-inferior img {
      width: 30px;
      height: 30px;
      display: block;
      margin: 0 auto 4px;
    }
    .ativo {
      font-weight: 700;
      color: #008000;
    }
    .logo img {
      max-width: 400px;
      width: 100%;
      height: auto;
      display: block;
      margin: 0 auto;
    }
  </style>
</head>
<body>
  <div class="logo">
    <img src="1006.png" alt="Logo" />
  </div>

  <section class="usuario-info">
    <p id="usuario-nome">Luis Fernando</p>
    <p id="usuario-telefone">ID75998**2201</p>
  </section>

  <section class="acoes">
    <a href="deposito.html" class="botao"><img src="10003.png" alt="Depósito"> Depósito</a>
    <a href="saque.html" class="botao"><img src="10004.png" alt="Retirada"> Retirada</a>
    <button class="botao" id="checkin-diario" onclick="realizarCheckin()"><img src="10005.png" alt="Check-in Diário"> Check-in Diário</button>
    <a href="download.html" class="botao"><img src="10011.png" alt="Baixar App"> Baixar App</a>
    <a href="ajuda.html" class="botao"><img src="10011.png" alt="Ajuda"> Ajuda</a>
  </section>

  <div class="notificacao">
    <span class="icone-sino">🔔</span>
    <marquee behavior="scroll" direction="left" scrollamount="5" style="user-select:none;">
      NOTIFICAÇÃO IMPORTANTE! 🚨
Atenção, usuários da HInvest: A funcionalidade de recarga ainda não está disponível, mas será liberada no dia 17 de junho, com o lançamento oficial da plataforma.
Por enquanto, a função de convidar amigos já está disponível! Aproveite para compartilhar seu link de afiliado e começar a construir sua rede.
Obrigado pela compreensão e por fazer parte da HInvest!
    </marquee>
  </div>

  <!-- Carteira -->
  <section class="carteira">
    <h2>Minha carteira</h2>
    <div class="saldos">
      <div class="saldo">
        <img src="10004.png" alt="Saldo da Carteira" />
        <p id="saldo-carteira">R$ 100.00</p>
        <span>Saldo da carteira</span>
      </div>
      <div class="saldo">
        <img src="10004.png" alt="Valor Recebido" />
        <p id="valor-recebido">R$ 100.00</p>
        <span>Valor Recebido</span>
      </div>
      <div class="saldo">
        <img src="10004.png" alt="Valor de Recebimento" />
        <p id="valor-recebimento">R$ 0.00</p>
        <span>Valor de recebimento</span>
      </div>
    </div>
  </section>

  <nav class="menu-inferior">
    <a href="H.html" class="ativo"><img src="30001.png" alt="Início"> Início</a>
    <a href="investimento.html"><img src="10016.png" alt="Investimento"> Investimento</a>
    <a href="equipe.html"><img src="10017.png" alt="Equipe"> Equipe</a>
    <a href="perfil.html"><img src="10017.png" alt="Perfil"> Perfil</a>
  </nav>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyCKSKnVC8dNWmiMrNr1j4rMLfQTlOrqzVM",
    authDomain: "hinvest-f4354.firebaseapp.com",
    databaseURL: "https://hinvest-f4354-default-rtdb.firebaseio.com",
    projectId: "hinvest-f4354",
    storageBucket: "hinvest-f4354.appspot.com",
    messagingSenderId: "646397677016",
    appId: "1:646397677016:web:f05ca27a38439568bff6ad"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  document.addEventListener("DOMContentLoaded", () => {
    const userId = localStorage.getItem("telefoneLogado");

    if (!userId) {
      alert("Usuário não logado.");
      window.location.href = "index.html";
      return;
    }

    const userRef = db.ref("usuarios/" + userId);

    userRef.once("value").then(snapshot => {
      const data = snapshot.val() || {};

      if (data.saldoCarteira === undefined) {
        userRef.update({ saldoCarteira: 10 });
      }

      const nome = data.nome || "Usuário";
      const telefone = userId;
      const saldoCarteira = parseFloat(data.saldoCarteira ?? 10).toFixed(2);
      const valorRecebido = parseFloat(data.recebimento || 0).toFixed(2);
      const retirada = parseFloat(data.retirada || 0).toFixed(2);
      const ultimoCheckin = data.ultimoCheckin || "";

      const usuarioNome = document.getElementById("usuario-nome");
      const usuarioTelefone = document.getElementById("usuario-telefone");
      const saldoCarteiraElement = document.getElementById("saldo-carteira");
      const valorRecebidoElement = document.getElementById("valor-recebido");
      const valorRecebimentoElement = document.getElementById("valor-recebimento");

      usuarioNome.innerText = nome;
      usuarioTelefone.innerText = telefone;
      saldoCarteiraElement.innerText = `R$ ${saldoCarteira}`;
      valorRecebidoElement.innerText = `R$ ${valorRecebido}`;
      valorRecebimentoElement.innerText = `R$ ${retirada}`;

      // Lógica do check-in diário
      const checkinButton = document.getElementById('checkin-diario');
      const currentTime = Date.now();
      const nextCheckinTime = data.ultimoCheckin ? new Date(data.ultimoCheckin).getTime() + 24 * 60 * 60 * 1000 : 0;

      if (currentTime < nextCheckinTime) {
        checkinButton.disabled = true;
        const timeLeft = nextCheckinTime - currentTime;
        checkinButton.innerText = `Próximo check-in em ${(timeLeft / 1000 / 60 / 60).toFixed(0)} horas`;
      }
    });
  });

  function realizarCheckin() {
    const userId = localStorage.getItem("telefoneLogado");

    if (!userId) {
      alert("Usuário não logado.");
      return;
    }

    const userRef = db.ref("usuarios/" + userId);
    const currentTime = new Date().toISOString();

    userRef.once("value").then(snapshot => {
      const data = snapshot.val() || {};
      const saldoCarteira = parseFloat(data.saldoCarteira || 0);

      // Atualiza saldo e registra horário do último check-in
      userRef.update({
        saldoCarteira: saldoCarteira + 1,
        ultimoCheckin: currentTime
      }).then(() => {
        alert("Check-in realizado com sucesso! R$ 1.00 adicionado à sua carteira.");
        location.reload();
      });
    });
  }
</script>
</body>
</html>
